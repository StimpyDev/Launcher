<?xml version="1.0" encoding="UTF-8"?>
<UserControl
	xmlns="https://github.com/avaloniaui"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:md="https://github.com/whistyun/Markdown.Avalonia"
	xmlns:vm="using:Launcher.ViewModels"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
			 mc:Ignorable="d"
			 d:DesignWidth="400"
			 d:DesignHeight="400"
			 x:DataType="vm:Server"
	xmlns:m="using:Launcher.Models"
			 x:Class="Launcher.Views.Server">
	<Design.DataContext>
		<vm:Server />
	</Design.DataContext>
	<Grid RowDefinitions="20,40,*" ColumnDefinitions="*,40">
		<!-- Title -->
		<StackPanel Effect="drop-shadow(1 1 1 #40000000)" Grid.Row="1">
			<StackPanel Orientation="Vertical" HorizontalAlignment="Center">
				<TextBlock FontSize="24" Margin="-20,40,0,0" Text="{Binding Info.Name, Mode=OneWay}" FontFamily="{StaticResource FontDefault}" />
			</StackPanel>
		</StackPanel>
		<!-- Refresh Status -->
		<StackPanel Effect="drop-shadow(1 1 1 #40000000)" Grid.Row="1" >
			<StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="0,35,200,0">
				<Button Classes="no_background" Margin="5" Command="{Binding RefreshServerStatusCommand}">
					<Path Width="18" Height="18" Classes.rotating="{Binding IsRefreshing}" Data="{StaticResource Icons.Loading}" Stretch="Fill" />
				</Button>
			</StackPanel>
		</StackPanel>
		<!-- Server Status / Player Count -->
		<StackPanel Grid.Row="2" Effect="drop-shadow(1 1 1 #40000000)" Margin="30,50,50,60">
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
				<StackPanel Spacing="2.5" Orientation="Horizontal">
					<TextBlock Text="{StaticResource Text.ServerStatus}" FontFamily="{StaticResource FontDefault}" FontSize="15" />
					<TextBlock Text="{Binding Status, Mode=OneWay}" FontFamily="{StaticResource FontDefault}" FontSize="15" Margin="-3,1,0,0" Foreground="{Binding ServerStatusFill}" />
				</StackPanel>
			</StackPanel>
		</StackPanel>
		<StackPanel Grid.Row="2" Margin="40,35,40,40">
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
				<TextBlock Text="{StaticResource Text.OnlinePlayers}" FontFamily="{StaticResource FontDefault}" FontSize="15" />
				<TextBlock Text="{Binding OnlinePlayers, Mode=OneWay}" FontFamily="{StaticResource FontDefault}" Width="30" FontSize="15" />
			</StackPanel>
		</StackPanel>
		<!-- Server Description -->
		<StackPanel Grid.Row="2" Effect="drop-shadow(1 1 1 #40000000)">
			<StackPanel VerticalAlignment="Stretch" Margin="0,80,0,0" Width="650">
				<Border Padding="15" CornerRadius="5.5" Opacity="0.050" Background="{StaticResource Color.Description}" IsVisible="{Binding Info.Description, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
					<ScrollViewer Opacity="200">
						<md:MarkdownScrollViewer HorizontalAlignment="Center" VerticalAlignment="Center" Margin="45,0,0,0" Markdown="{Binding Info.Description}"/>
					</ScrollViewer>
				</Border>
			</StackPanel>
		</StackPanel>
		<!-- Server Play / Update Status -->
		<StackPanel Grid.Row="3">
			<StackPanel Orientation="Horizontal" Margin="0,325,15,0" HorizontalAlignment="Center">
				<Button Classes="no_background" Cursor="Hand" Command="{Binding PlayCommand}" IsVisible="{Binding Process, Converter={x:Static ObjectConverters.IsNull}}" IsEnabled="{Binding Process, Converter={x:Static ObjectConverters.IsNull}}">
					<asyncImageLoader:AdvancedImage Source="/Assets/fr_asset3.png" Effect="drop-shadow(3 3 3 #40000000)" Height="60" Margin="0,0,0,85" Stretch="UniformToFill" />
				</Button>
			</StackPanel>
		</StackPanel>
		<!--Status Info-->
		<StackPanel VerticalAlignment="Bottom" Grid.Row="3" Margin="0,0,5,75" HorizontalAlignment="Center">
			<TextBlock Text="{Binding StatusMessage, Mode=OneWay}" FontSize="13" FontWeight="Medium"/>
		</StackPanel>
		<!--Client Running-->
		<StackPanel VerticalAlignment="Bottom" Grid.Row="3" Margin="0,0,0,10" HorizontalAlignment="Center">
			<TextBlock Text="{StaticResource Text.IsRunning}" FontSize="13" FontWeight="Medium" FontFamily="{StaticResource FontDefault}" IsVisible="{Binding Process, Converter={x:Static ObjectConverters.IsNotNull}}"/>
		</StackPanel>
		<!-- Client Folder -->
		<StackPanel Grid.Row="3" HorizontalAlignment="Right" Effect="drop-shadow(2 2 2 #40000000)" Margin="0,0,-40,10" VerticalAlignment="Bottom">
			<Button Classes="flat primary" CornerRadius="5" Command="{Binding OpenClientFolderCommand}" IsVisible="{Binding ActiveServer, Converter={x:Static ObjectConverters.IsNull}}">
				<Button.Background>
					<LinearGradientBrush StartPoint="50%,0%" EndPoint="50%,100%">
						<GradientStop Color="#687AA7" Offset="0.0"/>
						<GradientStop Color="#3C4C74" Offset="0.8"/>
					</LinearGradientBrush>
				</Button.Background>
				<Path Width="16" Height="16" Data="{StaticResource Icons.Folder}" Stretch="Fill" />
			</Button>
		</StackPanel>
	</Grid>
</UserControl>
